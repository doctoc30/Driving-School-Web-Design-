<!DOCTYPE html>
<html lang="en"> 
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>D S W D</title>

<style>
/* ---------- RESET & BASE ---------- */
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
  font-family: 'Poppins', sans-serif;
  background-color: #33a7d4;
  color: white;
  overflow-x: hidden;
}
header {
  position: fixed;
  top: 0; left: 0; right: 0;
  height: 60px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 20px;
  background-color: #33a7d4;
  z-index: 2000;
  box-shadow: 0 2px 8px rgb(0 0 0 / 0.15);
}
.logo { font-weight: 900; font-size: 1.7rem; letter-spacing: 2px; user-select: none; cursor: default; }
.hamburger { width: 28px; height: 22px; cursor: pointer; position: relative; display: flex; flex-direction: column; justify-content: space-between; z-index: 2100; }
.hamburger span { display: block; height: 3.5px; background: white; border-radius: 2px; transition: all 0.35s ease-in-out; }
.hamburger.active span:nth-child(1) { transform: translateY(9px) rotate(45deg); }
.hamburger.active span:nth-child(2) { opacity: 0; }
.hamburger.active span:nth-child(3) { transform: translateY(-9px) rotate(-45deg); }

/* ---------- NAVIGATION ---------- */
nav.menu {
  position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
  background-color: #33a7d4;
  transform: translateX(-100%);
  transition: transform 0.5s cubic-bezier(0.4,0,0.2,1);
  display: flex; flex-direction: column; justify-content: center;
  padding-left: 4rem; z-index: 2050;
}
nav.menu.open { transform: translateX(0); }
nav.menu ul { list-style: none; }
nav.menu ul li { margin-bottom: 2.2rem; opacity: 0; transform: translateX(-40px); font-weight: 900; font-size: 3rem; letter-spacing: 0.1em; }
nav.menu ul li a { color: white; text-decoration: none; display: inline-block; transition: color 0.3s ease; user-select: none; }
nav.menu ul li a:hover { color: #222; }
nav.menu.open ul li { animation: slideInFade 0.4s forwards; }
@keyframes slideInFade { to { opacity: 1; transform: translateX(0); } }

/* Desktop nav overrides */
@media (min-width: 1024px) {
  .hamburger { display: none; }
  nav.menu { position: static; height: auto; width: auto; background: transparent; transform: none !important; padding-left: 0; flex-direction: row; justify-content: flex-end; align-items: center; }
  nav.menu ul { display: flex; gap: 3rem; }
  nav.menu ul li { margin: 0; opacity: 1 !important; transform: none !important; font-size: 1.25rem; animation: none !important; }
  nav.menu ul li a { font-weight: 900; font-size: 1.1rem; color: white; letter-spacing: 0.15em; }
  nav.menu ul li a:hover { color: #222; }
}

/* ---------- TYPEWRITER + SKYROCKET ---------- */
.color-rise { display: none; transition: none; position: absolute; top:0; left:0; width:100%; height:100%; background-color:white; z-index:0; }
.color-rise.active { display: block; transition: background-color 2s ease; }
#typewriter { display: none; position: fixed; top:50%; left:50%; transform: translate(-50%,-50%); width:90%; z-index:1000; font-family: 'Arial Black', Arial, sans-serif; font-weight:600; text-align:center; color:white; line-height:1.3; pointer-events:none; }
#typewriter.active { display:block; }
.typed-line { display:block; margin:0.1em 0; }
.cursor { display:inline-block; width:2px; background:white; animation: blink 1s step-start infinite; vertical-align:bottom; margin-left:2px; }
@keyframes blink { 50% { background: transparent; } }

/* ---------- FORM SCREENS ---------- */
.form-screen {
  display: none; flex-direction: column; justify-content: center; align-items: center;
  min-height: 100vh; padding: 20px; box-sizing: border-box; text-align:center; transition:all 0.3s ease;
  background: #33a7d4; color: white; border-radius:12px;
}
.form-screen.active { display: flex; }
.form-screen h2 { font-size: 1.8rem; margin-bottom: 3rem; max-width:500px; line-height:1.4; }

/* Buttons in form */
.button-row { display:flex; flex-wrap:wrap; justify-content:center; gap:15px; margin-top:20px; }
.button-row button {
  background:white; color:#33a7d4; border:none; border-radius:8px; padding:1rem 2rem; font-weight:bold; font-size:1rem; cursor:pointer; min-width:140px; transition:0.3s;
}
.button-row button:hover { background:#227090; color:white; }

/* Inputs */
select, input[type="text"], input[type="email"], input[type="tel"] {
  padding:1rem; border:none; border-radius:8px; font-size:1rem; margin-bottom:1.5rem;
  width:100%; max-width:100%; appearance:none; background:white; color:#333; height:3.5rem; box-sizing:border-box; font-family:inherit;
}
select { background-image: url("data:image/svg+xml;utf8,<svg fill='black' viewBox='0 0 24 24'><path d='M7 10l5 5 5-5z'/></svg>"); background-repeat:no-repeat; background-position:right 1rem center; background-size:1rem; }

/* Skip link */
.skip-link { position:fixed; bottom:20px; left:50%; transform:translateX(-50%); background:none; color:white; border:none; cursor:pointer; font-size:16px; z-index:10000; }
.skip-link:hover { opacity:0.8; }

/* Intro screen adjustments */
#main-intro-options { justify-content:center !important; min-height:100vh; padding-top:0 !important; }
#main-intro-options h2 { margin-top:40px; }
#main-intro-options .button-row { margin-top:60px; }

/* ---------- PRICING SECTION ---------- */
#pricing-section { padding:100px 20px 40px 20px; min-height:100vh; display:flex; justify-content:center; align-items:flex-start; width:100%; overflow-x:hidden; }
.pricing-container { display:flex; flex-direction:column; gap:40px; width:100%; max-width:600px; margin:0 auto; }
.pricing-card { width:100%; min-height:70vh; background:linear-gradient(145deg, rgba(255,255,255,0.12), rgba(255,255,255,0.06)); border-radius:16px; padding:40px 20px; display:flex; flex-direction:column; justify-content:space-between; text-align:center; opacity:0; transform:translateY(50px); transition:all 0.8s ease; position:relative; box-shadow:0 8px 20px rgba(0,0,0,0.25); }
.pricing-card:hover { transform:translateY(-10px) scale(1.03); box-shadow:0 20px 40px rgba(0,0,0,0.35); }
.pricing-card.recommended .badge { position:absolute; top:15px; right:15px; background:#227090; color:white; padding:0.5rem 1rem; border-radius:50px; font-size:0.85rem; font-weight:bold; }
.pricing-card h3 { font-size:2rem; margin-bottom:1rem; font-weight:900; }
.pricing-card .price { font-size:2.5rem; margin-bottom:2rem; font-weight:bold; }
.pricing-card ul { list-style:none; margin-bottom:2rem; padding:0; }
.pricing-card ul li { margin:10px 0; font-size:1.1rem; }
.pricing-card.in-view { opacity:1; transform:translateY(0); }
.pricing-card.recommended.in-view { animation:glow 2s ease infinite alternate; }
@keyframes glow { 0% { box-shadow:0 20px 40px rgba(0,0,0,0.35); transform:translateY(0) scale(1.03);} 100% { box-shadow:0 25px 50px rgba(255,255,255,0.4); transform:translateY(-5px) scale(1.05);} }

/* PayPal Button */
.pay-now { display:inline-flex; align-items:center; justify-content:center; gap:10px; width:100%; padding:16px 20px; background:linear-gradient(135deg,#0070ba 0%,#00457c 100%); color:#fff; font-size:1.05rem; font-weight:600; border:none; border-radius:50px; cursor:pointer; box-shadow:0 4px 10px rgba(0,112,186,0.35); transition:all 0.2s ease; }
.pay-now:hover { background:linear-gradient(135deg,#004f8c 0%,#00345c 100%); transform:translateY(-2px); box-shadow:0 6px 14px rgba(0,112,186,0.45); }
.pay-now:active { transform:translateY(0); box-shadow:0 3px 6px rgba(0,112,186,0.3); }

/* Responsive adjustments */
@media(min-width:1024px){ .pricing-container{flex-direction:row;max-width:1200px;gap:20px;} .pricing-card{flex:1; min-height:65vh;} }
@media(max-width:768px){ .pricing-card{min-height:90vh; padding:60px 20px;} #pricing-section{padding:60px 0 40px 0 !important; margin:0; width:100%;} .pricing-container{max-width:100% !important; padding:0; margin:0; gap:20px;} }

/* ---------- MOBILE ADJUSTMENTS ---------- */
@media screen and (max-width:599px) { #typewriter { font-size:clamp(2.8rem,7vw,5.5rem); max-width:90vw; } }
@media screen and (min-width:600px) and (max-width:1024px) and (orientation:portrait) { #typewriter { font-size:6rem !important; max-width:90vw !important; } }
@media screen and (min-width:600px) and (max-width:1024px) and (orientation:landscape) { #typewriter { font-size:5.5rem !important; max-width:85vw !important; } }
@media screen and (max-width:812px) and (orientation:landscape) { #typewriter { top:60% !important; transform:translate(-50%,-60%) !important; font-size:clamp(1.5rem,4vw,2.8rem) !important; line-height:1.2 !important; max-width:90vw !important; } }

/* Adjust first intro screen spacing */
@media (min-width:600px) and (max-width:1024px) { .button-row { gap:3rem; flex-wrap:wrap; justify-content:center; } .button-row button { min-width:140px; margin:0.5rem 1rem; } }
</style>




</head>
<body>
<header>
 <div class="logo">
 
       D S W D
</div>

<div class="hamburger" role="button" aria-label="Toggle menu" aria-expanded="false" aria-controls="primary-menu" tabindex="0">
    <span></span>
    <span></span>
    <span></span>
  </div>
 
<nav class="menu" id="primary-menu" role="navigation" aria-hidden="true">
  <ul>
  <li><a href="/Driving-School-Web-Design-/pages/home.html">Home</a></li>
<li><a href="/Driving-School-Web-Design-/pages/about.html">About</a></li>
<li><a href="/Driving-School-Web-Design-/pages/concepts.html">Concepts</a></li>
<li><a href="/Driving-School-Web-Design-/pages/pricing.html">Pricing</a></li>
<li><a href="/Driving-School-Web-Design-/pages/contact.html">Contact</a></li>
  </ul>
</nav>
 
</header> 


<div class="color-rise"></div>
<div id="typewriter"></div>

<form action="https://formsubmit.co/fazhoq1977@gmail.com" method="POST" id="formWrapper">

  <!-- Hidden fields to capture selected plan and features -->
  <input type="hidden" id="hiddenPlan" name="Selected Plan">
  <input type="hidden" id="hiddenFeatures" name="Selected Features">
  <input type="hidden" id="hiddenPaymentLink" name="Payment Link">

  <!-- INTRO -->
  <div class="form-screen active" id="main-intro-options">
    <h2>Welcome! What do you need help with today?</h2>
    <div class="button-row">
      <button type="button" onclick="setPath('instructor'); showScreen('instructor-q1')">New Website</button>
      <button type="button" onclick="setPath('instructor'); showScreen('instructor-q1')">Redesign Existing Website</button>
      <button type="button" onclick="setPath('instructor'); showScreen('instructor-q1')">Maintenance / Updates</button>
    </div>
  </div>

  <!-- Q1: Branch -->
  <div class="form-screen" id="instructor-q1">
    <h2>Are you a solo driving instructor or a driving school?</h2>
    <div class="button-row">
      <button type="button" onclick="recordFeature('solo'); next()">Solo Instructor</button>
      <button type="button" onclick="recordFeature('school'); next()">Driving School</button>
    </div>
  </div>

  <!-- Q2: Design Selection -->
  <div class="form-screen" id="instructor-q2">
    <h2>Do you have a design concept in mind?</h2>
    <p>You can enter a design code, choose from templates, or request a custom design.</p>
    <div class="button-row">
      <button type="button" onclick="showScreen('design-code')">Yes, I have a code</button>
      <button type="button" onclick="window.location.href='https://doctoc30.github.io/Driving-School-Web-Design-/pages/concepts.html?fromFunnel=1'">Show me concepts</button>
      <button type="button" onclick="next()">Custom design</button>
    </div>
  </div>

  <!-- Q3 (Updated): Design Code Entry -->
  <div class="form-screen" id="design-code">
    <h2>Enter your chosen design code</h2>
    <input type="text" id="designInput" name="Design Code" placeholder="e.g. SDI-5" required>
    <div class="button-row">
      <button type="button" onclick="goToConcept()">Continue</button>
      <button type="button" onclick="next()">Skip</button>
    </div>
  </div>

  <!-- Q4: Booking & Payment -->
  <div class="form-screen" id="instructor-q4">
    <h2>Do you want students to book & pay online?</h2>
    <p>This makes it easy for parents and learners to schedule instantly.</p>
    <div class="button-row">
      <button type="button" onclick="recordFeature('booking'); next()">Yes</button>
      <button type="button" onclick="next()">No</button>
    </div>
  </div>

  <!-- Q5: Lesson Packages -->
  <div class="form-screen" id="instructor-q5">
    <h2>Do you want to offer lesson packages or gift vouchers?</h2>
    <p>Popular for parents buying lessons for teens. Can be sold online.</p>
    <div class="button-row">
      <button type="button" onclick="recordFeature('packages'); next()">Yes</button>
      <button type="button" onclick="next()">No</button>
    </div>
  </div>

  <!-- Q6: Local SEO -->
  <div class="form-screen" id="instructor-q6">
    <h2>Do you want your site to rank on Google locally?</h2>
    <p>Appear when people search ‚Äúdriving lessons near me‚Äù.</p>
    <div class="button-row">
      <button type="button" onclick="recordFeature('seo'); next()">Yes</button>
      <button type="button" onclick="next()">No</button>
    </div>
  </div>

  <!-- Q7: Reviews -->
  <div class="form-screen" id="instructor-q7">
    <h2>Would you like to display student reviews?</h2>
    <p>Testimonials build trust and help attract new learners.</p>
    <div class="button-row">
      <button type="button" onclick="recordFeature('reviews'); next()">Yes</button>
      <button type="button" onclick="next()">No</button>
    </div>
  </div>

  <!-- Q8: Social Media -->
  <div class="form-screen" id="instructor-q8">
    <h2>Do you want social media integration?</h2>
    <p>Connect Facebook, Instagram, or TikTok to your website.</p>
    <div class="button-row">
      <button type="button" onclick="recordFeature('social'); next()">Yes</button>
      <button type="button" onclick="next()">No</button>
    </div>
  </div>

  <!-- Q9: Professional Email -->
  <div class="form-screen" id="instructor-q9">
    <h2>Would you like a professional email (e.g., info@yourdomain.com)?</h2>
    <div class="button-row">
      <button type="button" onclick="recordFeature('email'); next()">Yes</button>
      <button type="button" onclick="next()">No</button>
    </div>
  </div>

  <!-- Q10: Branding -->
  <div class="form-screen" id="instructor-q10">
    <h2>Do you have a logo and brand colors?</h2>
    <p>If not, we can help create branding for your website.</p>
    <div class="button-row">
      <button type="button" onclick="recordFeature('branding'); next()">Yes</button>
      <button type="button" onclick="next()">No</button>
    </div>
  </div>

  <!-- Q11: Content -->
  <div class="form-screen" id="instructor-q11">
    <h2>Do you already have text and images prepared?</h2>
    <p>Content is important for launching quickly. We can also help create it.</p>
    <div class="button-row">
      <button type="button" onclick="recordFeature('content'); next()">Yes</button>
      <button type="button" onclick="next()">No</button>
    </div>
  </div>

  <!-- Q12: First Lesson Guide -->
  <div class="form-screen" id="instructor-q12">
    <h2>Do you want a ‚ÄúWhat to Expect‚Äù guide for first lessons?</h2>
    <p>This reduces student anxiety and builds trust.</p>
    <div class="button-row">
      <button type="button" onclick="recordFeature('guide'); next()">Yes</button>
      <button type="button" onclick="next()">No</button>
    </div>
  </div>

  <!-- Q13: Resources -->
  <div class="form-screen" id="instructor-q13">
    <h2>Would you like to link to official resources?</h2>
    <p>Such as booking theory/practical tests, Highway Code, and revision materials.</p>
    <div class="button-row">
      <button type="button" onclick="recordFeature('resources'); next()">Yes</button>
      <button type="button" onclick="next()">No</button>
    </div>
  </div>

  <!-- Q14: Mobile -->
  <div class="form-screen" id="instructor-q14">
    <h2>Do you want your site optimized for mobile?</h2>
    <p>Most learners browse and book on their phones.</p>
    <div class="button-row">
      <button type="button" onclick="recordFeature('mobile'); next()">Yes</button>
      <button type="button" onclick="next()">No</button>
    </div>
  </div>

  <!-- Q15: CTAs -->
  <div class="form-screen" id="instructor-q15">
    <h2>Do you want strong call-to-action buttons?</h2>
    <p>Helps guide students to book lessons or check packages.</p>
    <div class="button-row">
      <button type="button" onclick="recordFeature('cta'); next()">Yes</button>
      <button type="button" onclick="next()">No</button>
    </div>
  </div>

  <!-- Q16: Pages -->
  <div class="form-screen" id="instructor-q16">
    <h2>How many pages will your site need?</h2>
    <div class="button-row">
      <button type="button" onclick="recordFeature('pages-5'); next()">Around 5</button>
      <button type="button" onclick="recordFeature('pages-10'); next()">Around 10</button>
      <button type="button" onclick="recordFeature('pages-50'); next()">50+</button>
            <button type="button" onclick="recordFeature('pages-50'); next()">50+</button>
    </div>
  </div>

<!-- ==== STEP 17: PRICING ==== -->
<div id="instructor-q17" class="form-screen">
  <section id="pricing-section">
    <div class="pricing-container">
      <!-- Basic Plan -->
      <div class="pricing-card" data-animate>
        <h3>Basic</h3>
        <p class="price">¬£499</p>
        <ul>
          <li>5 Pages Website</li>
          <li>5 Revisions</li>
          <li>Mobile Friendly</li>
        </ul>
        <button class="pay-now" onclick="window.location.href='https://www.paypal.com/paypal-link-basic'">
          <img src="https://upload.wikimedia.org/wikipedia/commons/b/b5/PayPal.svg" alt="PayPal">
          Pay ¬£499 via PayPal
        </button>
        <div class="paypal-badge">
          <img src="https://www.paypalobjects.com/webstatic/mktg/logo/pp_cc_mark_111x69.jpg" alt="Secured by PayPal">
          <p><span class="lock-icon">üîí</span> Safe & Secure Checkout</p>
        </div>
      </div>

      <!-- Pro Plan -->
      <div class="pricing-card recommended" data-animate>
        <div class="badge">Recommended</div>
        <h3>Pro</h3>
        <p class="price">¬£999</p>
        <ul>
          <li>10 Pages Website</li>
          <li>15 Revisions</li>
          <li>SEO Optimization</li>
          <li>Booking System</li>
        </ul>
        <button class="pay-now" onclick="window.location.href='https://www.paypal.com/paypal-link-pro'">
          <img src="https://upload.wikimedia.org/wikipedia/commons/b/b5/PayPal.svg" alt="PayPal">
          Pay ¬£999 via PayPal
        </button>
        <div class="paypal-badge">
          <img src="https://www.paypalobjects.com/webstatic/mktg/logo/pp_cc_mark_111x69.jpg" alt="Secured by PayPal">
          <p><span class="lock-icon">üîí</span> Safe & Secure Checkout</p>
        </div>
      </div>

      <!-- Premium Plan -->
      <div class="pricing-card" data-animate>
        <h3>Premium</h3>
        <p class="price">¬£1499</p>
        <ul>
          <li>50+ Pages Website</li>
          <li>30 Revisions</li>
          <li>Full Branding</li>
          <li>Booking & Payment Integration</li>
          <li>Social Media Integration</li>
        </ul>
        <button class="pay-now" onclick="window.location.href='https://www.paypal.com/paypal-link-premium'">
          <img src="https://upload.wikimedia.org/wikipedia/commons/b/b5/PayPal.svg" alt="PayPal">
          Pay ¬£1499 via PayPal
        </button>
        <div class="paypal-badge">
          <img src="https://www.paypalobjects.com/webstatic/mktg/logo/pp_cc_mark_111x69.jpg" alt="Secured by PayPal">
          <p><span class="lock-icon">üîí</span> Safe & Secure Checkout</p>
        </div>
      </div>
    </div>
  </section>
  <button onclick="prev()" style="margin-top:20px;">Back</button>
</div>

    <!-- Additional Info & Next Steps -->
    <div class="next-step">
      <p>Once you select your plan, we will guide you through the next steps to finalize your website.</p>
      <div class="button-row">
        <button type="button" onclick="submitForm()">Continue</button>
      </div>
    </div>
  </div>

  <!-- Final Thank You Screen -->
  <div class="form-screen" id="thank-you-screen">
    <h2>Thank you for completing the questionnaire!</h2>
    <p>We will send your selected plan and payment link to your email shortly.</p>
    <div class="button-row">
      <button type="button" onclick="resetForm()">Start Over</button>
    </div>
  </div>
</form>
 
<a href="https://doctoc30.github.io/Faz-Designs/pages/about.html" 
   id="skipToPackages" class="skip-link" style="display: none;">
  Skip Questions For Now ‚Üí
</a>
  </div>

<script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const params = new URLSearchParams(window.location.search);
  const codeParam = params.get("code");
  const stepParam = params.get("step");
  const fromFunnel = params.has("fromFunnel");

  const screens = document.querySelectorAll(".form-screen");
  let currentScreen = 0;

  // ------------------ Screen navigation ------------------
  function hideAllScreens() {
    screens.forEach(screen => {
      screen.classList.remove("active");
      screen.style.display = "none";
    });
  }

  function showScreen(screenId) {
    const newScreen = document.getElementById(screenId);
    if (!newScreen) return;

    const current = screens[currentScreen];
    if (current) current.classList.remove("active");

    newScreen.classList.add("active");
    newScreen.style.display = "flex";
    currentScreen = Array.from(screens).indexOf(newScreen);

    window.scrollTo({ top: 0, behavior: 'smooth' });
  }

  function next() {
    if (currentScreen < screens.length - 1) {
      currentScreen++;
      showScreen(screens[currentScreen].id);
    }
  }

  function prev() {
    if (currentScreen > 0) {
      currentScreen--;
      showScreen(screens[currentScreen].id);
    }
  }

  window.showScreen = showScreen;
  window.next = next;
  window.prev = prev;

  // ------------------ User path and features ------------------
  let userPath = "";
  const features = [];
  window.setPath = (path) => { userPath = path; };
  window.recordFeature = (feature) => { if (!features.includes(feature)) features.push(feature); };
  window.recommendPlan = () => {
    let plan = '';
    const count = features.length;
    if (count <= 3) plan = 'Basic Plan: Simple website + booking/contact';
    else if (count <= 6) plan = 'Standard Plan: Booking, payments, SEO, branding help';
    else plan = 'Premium Plan: Full features including lesson packages, social media, content help, and professional email';
    const recEl = document.getElementById('recommended-plan');
    if (recEl) recEl.innerText = plan;
  };

  // ------------------ Typewriter animation ------------------
  const typewriterEl = document.getElementById('typewriter');
  const colorRiseEl = document.querySelector('.color-rise');

  function startTypewriterAnimation() {
    if (!typewriterEl) return;
    typewriterEl.style.opacity = 1;
    let lines = [];
    let currentLine = 0;
    let currentChar = 0;
    let lineEl = null;
    const typingSpeed = 100;
    const lineDelay = 500;
    const cursor = document.createElement('span');
    cursor.classList.add('cursor');
    typewriterEl.appendChild(cursor);

    function setLinesByOrientation() {
      lines = window.matchMedia("(orientation: landscape)").matches
        ? ["We build", "your website.", "You approve,", "then pay."]
        : ["We build", "your", "website.", "You approve,", "then pay."];
    }

    function typeChar() {
      if (currentLine >= lines.length) {
        cursor.remove();
        setTimeout(() => {
          typewriterEl.style.animation = 'rocketRise 2s ease forwards';
          setTimeout(() => showScreen('main-intro-options'), 2000);
        }, 1000);
        return;
      }
      const text = lines[currentLine];
      if (!lineEl) {
        lineEl = document.createElement('div');
        lineEl.classList.add('typed-line');
        typewriterEl.appendChild(lineEl);
        lineEl.appendChild(cursor);
      }
      if (currentChar < text.length) {
        lineEl.insertBefore(document.createTextNode(text[currentChar]), cursor);
        currentChar++;
        setTimeout(typeChar, typingSpeed);
      } else {
        currentLine++;
        currentChar = 0;
        lineEl = null;
        setTimeout(typeChar, lineDelay);
      }
    }

    setLinesByOrientation();
    typeChar();

    window.addEventListener('resize', debounce(() => {
      currentLine = 0;
      currentChar = 0;
      lineEl = null;
      typewriterEl.textContent = '';
      typewriterEl.appendChild(cursor);
      setLinesByOrientation();
      typeChar();
    }, 300));
  }

  function debounce(func, wait) {
    let timeout;
    return function(...args) {
      clearTimeout(timeout);
      timeout = setTimeout(() => func.apply(this, args), wait);
    };
  }

  // ------------------ Initialize funnel ------------------
  hideAllScreens();
  if (!codeParam && !stepParam) {
    if (typewriterEl) typewriterEl.classList.add('active');
    if (colorRiseEl) colorRiseEl.classList.add('active');
    startTypewriterAnimation();
  } else {
    if (typewriterEl) typewriterEl.classList.remove('active', 'rocketRise');
    if (colorRiseEl) colorRiseEl.classList.remove('active');
    if (stepParam) showScreen(`instructor-q${stepParam}`);
    else showScreen('instructor-q2');
  }

  // ------------------ Step 3: Design code ------------------
  window.goToConcept = () => {
    const input = document.getElementById('designInput');
    if (!input) return;
    const code = input.value.trim();
    if (!code) { alert("Please enter a design code."); return; }
    window.location.href = `https://doctoc30.github.io/Driving-School-Web-Design-/pages/concepts.html?code=${encodeURIComponent(code)}&fromFunnel=1`;
  };

  // ------------------ Returning from concepts ------------------
  if (codeParam && stepParam && stepParam === "4") {
    const inputEl = document.getElementById("designInput");
    if (inputEl) inputEl.value = codeParam;
    showScreen(`instructor-q4`);
  }

  // ------------------ Hamburger menu ------------------
  const hamburger = document.querySelector('.hamburger');
  const menu = document.querySelector('nav.menu');
  if (hamburger && menu) {
    hamburger.addEventListener('click', e => {
      e.stopPropagation();
      const isOpen = menu.classList.toggle('open');
      hamburger.classList.toggle('active');
      hamburger.setAttribute('aria-expanded', isOpen);
      menu.setAttribute('aria-hidden', !isOpen);
      document.body.style.overflow = isOpen ? 'hidden' : '';
    });

    document.addEventListener('click', e => {
      if (!menu.contains(e.target) && !hamburger.contains(e.target)) {
        menu.classList.remove('open');
        hamburger.classList.remove('active');
        hamburger.setAttribute('aria-expanded', false);
        menu.setAttribute('aria-hidden', true);
        document.body.style.overflow = '';
      }
    });
  }
});



   // ---------- AOS INIT ----------
AOS.init();

// ---------- Funnel Navigation ----------
const screens = document.querySelectorAll(".form-screen");
let currentScreen = 0;

function hideAllScreens() {
  screens.forEach(s => s.classList.remove("active"));
}

function showScreen(id) {
  hideAllScreens();
  const screen = document.getElementById(id);
  if(screen) screen.classList.add("active");
  window.scrollTo({ top: 0, behavior: 'smooth' });
  currentScreen = Array.from(screens).indexOf(screen);
}

function next() {
  if(currentScreen < screens.length -1) {
    currentScreen++;
    showScreen(screens[currentScreen].id);
  }
}

function prev() {
  if(currentScreen > 0) {
    currentScreen--;
    showScreen(screens[currentScreen].id);
  }
}

// ---------- Intersection Observer for Pricing Cards ----------
const cards = document.querySelectorAll('.pricing-card[data-animate]');
const observer = new IntersectionObserver((entries, obs) => {
  entries.forEach(entry => {
    if(entry.isIntersecting){
      entry.target.classList.add('in-view');
      obs.unobserve(entry.target);
    }
  });
},{threshold:0.3});
cards.forEach(card => observer.observe(card));

</script>
</body>
</html>
