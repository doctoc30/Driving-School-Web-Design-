<!DOCTYPE html>
<html lang="en"> 
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>D S W D</title>

<style>
 * {
  margin: 0; padding: 0; box-sizing: border-box;
}

body {
  font-family: 'Poppins', sans-serif;
  background-color: #33a7d4;
  color: white;
  overflow-x: hidden;
}

/* ---------- HEADER & NAV ---------- */
header {
  position: fixed;
  top: 0; left: 0; right: 0;
  height: 60px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 20px;
  background-color: #33a7d4;
  z-index: 2000;
  box-shadow: 0 2px 8px rgb(0 0 0 / 0.15);
}

.logo {
  font-weight: 900;
  font-size: 1.7rem;
  letter-spacing: 2px;
  user-select: none;
  cursor: default;
}

.logo img {
  height: 40px;
  width: auto;
  display: block;
}

.hamburger {
  width: 28px;
  height: 22px;
  cursor: pointer;
  position: relative;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  z-index: 2100;
}

.hamburger span {
  display: block;
  height: 3.5px;
  background: white;
  border-radius: 2px;
  transition: all 0.35s ease-in-out;
}

.hamburger.active span:nth-child(1) {
  transform: translateY(9px) rotate(45deg);
}

.hamburger.active span:nth-child(2) {
  opacity: 0;
}

.hamburger.active span:nth-child(3) {
  transform: translateY(-9px) rotate(-45deg);
}

nav.menu {
  position: fixed;
  top: 0; left: 0;
  width: 100vw;
  height: 100vh;
  background-color: #33a7d4;
  transform: translateX(-100%);
  transition: transform 0.5s cubic-bezier(0.4,0,0.2,1);
  display: flex;
  flex-direction: column;
  justify-content: center;
  padding-left: 4rem;
  z-index: 2050;
}

nav.menu.open {
  transform: translateX(0);
}

nav.menu ul {
  list-style: none;
}

nav.menu ul li {
  margin-bottom: 2.2rem;
  opacity: 0;
  transform: translateX(-40px);
  font-weight: 900;
  font-size: 3rem;
  letter-spacing: 0.1em;
}

nav.menu ul li a {
  color: white;
  text-decoration: none;
  user-select: none;
  display: inline-block;
  transition: color 0.3s ease;
}

nav.menu ul li a:hover {
  color: #222;
}

nav.menu.open ul li {
  animation: slideInFade 0.4s forwards;
}

nav.menu.open ul li:nth-child(1) { animation-delay: 0.15s; }
nav.menu.open ul li:nth-child(2) { animation-delay: 0.35s; }
nav.menu.open ul li:nth-child(3) { animation-delay: 0.55s; }
nav.menu.open ul li:nth-child(4) { animation-delay: 0.75s; }
nav.menu.open ul li:nth-child(5) { animation-delay: 0.95s; }

@keyframes slideInFade {
  to { opacity: 1; transform: translateX(0); }
}

/* Desktop view */
@media (min-width: 1024px) {
  .hamburger { display: none; }
  nav.menu {
    position: static;
    height: auto;
    width: auto;
    background: transparent;
    transform: none !important;
    padding-left: 0;
    flex-direction: row;
    justify-content: flex-end;
    align-items: center;
  }
  nav.menu ul { display: flex; gap: 3rem; }
  nav.menu ul li {
    margin: 0;
    opacity: 1 !important;
    transform: none !important;
    font-size: 1.25rem;
    animation: none !important;
  }
  nav.menu ul li a {
    font-weight: 900;
    font-size: 1.1rem;
    color: white;
    letter-spacing: 0.15em;
  }
  nav.menu ul li a:hover { color: #222; }
}

/* ---------- SPLASH / TYPEWRITER ---------- */
html, body {
  margin: 0;
  padding: 0;
  height: 100vh;
  width: 100vw;
  overflow: hidden;
  font-family: 'Poppins', sans-serif;
  background: white;
}

.color-rise {
  position: absolute;
  top: 0; left: 0;
  height: 100%;
  width: 100%;
  background-color: white;
  animation: solidRise 8s ease-in-out forwards;
  z-index: 0;
  display: none;
  transition: background-color 2s ease;
}

.color-rise.active { display: block; }

@keyframes solidRise {
  0% { background-color: white; }
  100% { background-color: #33a7d4; }
}

.overlay-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-weight: bold;
  color: white;
  text-shadow: 0 0 30px #227090;
  z-index: 1;
  text-align: center;
  opacity: 0;
  font-size: clamp(3rem, 8vw, 6rem);
  line-height: 1.2;
  white-space: pre-line;
}

#typewriter {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 90%;
  z-index: 1000;
  font-family: 'Arial Black', Arial, sans-serif;
  font-weight: 600;
  text-align: center;
  color: white;
  opacity: 1;
  pointer-events: none;
  font-size: clamp(2.5rem, 6vw, 5rem);
  max-width: 90vw;
  line-height: 1.3;
  display: none;
}

#typewriter.active { display: block; }

.typed-line { display: block; }
.cursor {
  display: inline-block;
  width: 2px;
  background: white;
  animation: blink 1s step-start infinite;
  vertical-align: bottom;
  margin-left: 2px;
}

@keyframes blink { 50% { background: transparent; } }

/* ---------- FORMS ---------- */
.form-screen {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 90%;
  max-width: 500px;
  min-height: 60vh;
  background: #33a7d4;
  color: white;
  padding: 2rem;
  box-sizing: border-box;
  text-align: center;
  z-index: 1000;
  display: none;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  overflow-y: auto;
  border-radius: 12px;
}

.form-screen.active { display: flex; }

#form-start-choice {
  display: none;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  border-radius: 12px;
  opacity: 0;
  transition: opacity 1s ease;
}

#form-start-choice.show { display: flex; opacity: 1; }

select, input[type="text"], input[type="email"], input[type="tel"] {
  padding: 1rem;
  border: none;
  border-radius: 8px;
  font-size: 1rem;
  margin-bottom: 1.5rem;
  width: 100%;
  max-width: 100%;
  appearance: none;
  background-color: white;
  color: #333;
  height: 3.5rem;
  box-sizing: border-box;
  font-family: inherit;
}

/* ---------- BUTTONS ---------- */
button, .brand-btn {
  padding: 1rem 2rem;
  font-size: 1rem;
  border: none;
  border-radius: 8px;
  background: white;
  color: #33a7d4;
  font-weight: bold;
  margin: 0.5rem;
  cursor: pointer;
  transition: all 0.2s ease;
}

button:hover, .brand-btn:hover { opacity: 0.9; background: #f0f8ff; }

.button-row, .button-group {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 15px;
  margin-top: 20px;
}

.button-group { flex-direction: column; gap: 1rem; margin-top: 1rem; }

.skip-link {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  background: none;
  color: #ffffff;
  border: none;
  padding: 0;
  font-size: 16px;
  font-weight: normal;
  text-decoration: none;
  z-index: 10000;
  cursor: pointer;
  transition: opacity 0.3s ease;
}

.skip-link:hover { opacity: 0.8; }

/* ---------- PRICING SECTION ---------- */
#pricing-section {
  padding: 100px 20px 40px 20px;
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: flex-start;
  width: 100%;
  overflow-x: hidden;
}

.pricing-container {
  display: flex;
  flex-direction: column;
  gap: 40px;
  width: 100%;
  max-width: 600px;
  margin: 0 auto;
}

.pricing-card {
  width: 100%;
  min-height: 70vh;
  background: linear-gradient(145deg, rgba(255,255,255,0.12), rgba(255,255,255,0.06));
  border-radius: 16px;
  padding: 40px 20px;
  text-align: center;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  opacity: 0;
  transform: translateY(50px);
  transition: all 0.8s ease, transform 0.3s ease, box-shadow 0.3s ease;
  position: relative;
  box-shadow: 0 8px 20px rgba(0,0,0,0.25);
}

.pricing-card:hover { transform: translateY(-10px) scale(1.03); box-shadow: 0 20px 40px rgba(0,0,0,0.35); }
.pricing-card.recommended .badge { position: absolute; top: 15px; right: 15px; background: #227090; color: white; padding: 0.5rem 1rem; border-radius: 50px; font-size: 0.85rem; font-weight: bold; }
.pricing-card h3 { font-size: 2rem; margin-bottom: 1rem; font-weight: 900; }
.pricing-card .price { font-size: 2.5rem; margin-bottom: 2rem; font-weight: bold; }
.pricing-card ul { list-style: none; margin-bottom: 2rem; padding: 0; }
.pricing-card ul li { margin: 10px 0; font-size: 1.1rem; }
.pricing-card.in-view { opacity: 1; transform: translateY(0); }
.pricing-card.recommended.in-view { animation: glow 2s ease infinite alternate; }

@keyframes glow { 0% { box-shadow: 0 20px 40px rgba(0,0,0,0.35); transform: translateY(0) scale(1.03);} 100% { box-shadow: 0 25px 50px rgba(255,255,255,0.4); transform: translateY(-5px) scale(1.05);} }

@media (min-width: 1024px) { 
  #pricing-section { padding-top: 120px; }
  .pricing-container { flex-direction: row; max-width: 1200px; gap: 20px; }
  .pricing-card { flex: 1; min-height: 65vh; }
}

@media (max-width: 768px) {
  #pricing-section { padding: 60px 0 40px 0 !important; margin: 0; width: 100%; }
  .pricing-container { max-width: 100% !important; padding: 0; margin: 0; gap: 20px; }
  .pricing-card { width: 100% !important; border-radius: 0 !important; margin: 0; padding: 30px 15px !important; }
}

@media (max-width: 480px) {
  .pricing-card { padding: 30px 10px !important; }
}

/* ---------- PROGRESS BAR ---------- */
.progress-container {
  position: fixed;
  top: 60px;
  left: 0;
  width: 100%;
  height: 8px;
  background: rgba(255,255,255,0.2);
  border-radius: 4px;
  overflow: hidden;
  z-index: 2500;
}

.progress-bar {
  width: 0%;
  height: 100%;
  background: linear-gradient(90deg, #33a7d4, #227090);
  border-radius: 4px;
  position: relative;
  transition: width 0.5s ease-in-out;
}

.progress-bar::before {
  content: '';
  position: absolute;
  top: 0;
  left: -50%;
  width: 50%;
  height: 100%;
  background: rgba(255,255,255,0.3);
  transform: skewX(-20deg);
  animation: wave 1.2s linear infinite;
}

@keyframes wave {
  0% { left: -50%; }
  100% { left: 100%; }
}

.progress-label {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  color: white;
  font-weight: bold;
  font-size: 0.85rem;
  pointer-events: none;
}

@media(max-width: 768px) {
  .progress-container { height: 6px; }
  .progress-label { font-size: 0.7rem; }
}

</style>

</head>
<body>
<header>
 <div class="logo">
 
       D S W D
</div>

<div class="hamburger" role="button" aria-label="Toggle menu" aria-expanded="false" aria-controls="primary-menu" tabindex="0">
    <span></span>
    <span></span>
    <span></span>
  </div>
 
<nav class="menu" id="primary-menu" role="navigation" aria-hidden="true">
  <ul>
  <li><a href="/Driving-School-Web-Design-/pages/home.html">Home</a></li>
<li><a href="/Driving-School-Web-Design-/pages/about.html">About</a></li>
<li><a href="/Driving-School-Web-Design-/pages/concepts.html">Concepts</a></li>
<li><a href="/Driving-School-Web-Design-/pages/pricing.html">Pricing</a></li>
<li><a href="/Driving-School-Web-Design-/pages/contact.html">Contact</a></li>
  </ul>
</nav>
 
</header> 


<div class="color-rise"></div>
<div id="typewriter"></div>

 <!-- Progress Bar (placed below splash/typewriter) -->
<div class="progress-container">
  <div class="progress-bar"></div>
  <div class="progress-label">0%</div>
</div>

 
<form action="https://formsubmit.co/fazhoq1977@gmail.com" method="POST" id="formWrapper">

  <!-- Hidden fields to capture selected plan and features -->
  <input type="hidden" id="hiddenPlan" name="Selected Plan">
  <input type="hidden" id="hiddenFeatures" name="Selected Features">
  <input type="hidden" id="hiddenPaymentLink" name="Payment Link">

  <!-- ===================== Q1–Q16 ===================== -->

  <!-- INTRO -->
  <div class="form-screen active" id="main-intro-options">
    <h2>Welcome! What do you need help with today?</h2>
    <div class="button-row">
      <button type="button" onclick="setPath('instructor'); showScreen('instructor-q1')">New Website</button>
      <button type="button" onclick="setPath('instructor'); showScreen('instructor-q1')">Redesign Existing Website</button>
      <button type="button" onclick="setPath('instructor'); showScreen('instructor-q1')">Maintenance / Updates</button>
    </div>
  </div>

  <!-- Q1 -->
  <div class="form-screen" id="instructor-q1">
    <h2>Are you a solo driving instructor or a driving school?</h2>
    <div class="button-row">
      <button type="button" onclick="recordFeature('solo'); next()">Solo Instructor</button>
      <button type="button" onclick="recordFeature('school'); next()">Driving School</button>
    </div>
    <button type="button" onclick="prev()">Back</button>
  </div>

  <!-- Q2: Design Selection -->
  <div class="form-screen" id="instructor-q2">
    <h2>Do you have a design concept in mind?</h2>
    <p>You can enter a design code, choose from templates, or request a custom design.</p>
    <div class="button-row">
      <button type="button" onclick="showScreen('design-code')">Yes, I have a code</button>
      <button type="button" onclick="window.location.href='https://doctoc30.github.io/Driving-School-Web-Design-/pages/concepts.html?fromFunnel=1'">Show me concepts</button>
      <button type="button" onclick="next()">Custom design</button>
    </div>
    <button type="button" onclick="prev()">Back</button>
  </div>

  <!-- Q3: Design Code Entry -->
  <div class="form-screen" id="design-code">
    <h2>Enter your chosen design code</h2>
    <input type="text" id="designInput" name="Design Code" placeholder="e.g. SDI-5" required>
    <div class="button-row">
      <button type="button" onclick="goToConcept()">Continue</button>
      <button type="button" onclick="next()">Skip</button>
    </div>
    <button type="button" onclick="prev()">Back</button>
  </div>

  <!-- ------------------ SOLO INSTRUCTOR FUNNEL ------------------ -->

  <!-- STEP 4–8: Basic Plan -->
  <div class="form-screen" id="instructor-q4">
    <h2>Do you want students to book & pay online?</h2>
    <p><strong>(Basic Plan)</strong> – Allows students to book lessons and pay directly through your website.</p>
    <div class="button-row">
      <button type="button" onclick="recordFeature('booking'); next()">Yes</button>
      <button type="button" onclick="next()">No</button>
    </div>
    <button type="button" onclick="prev()">Back</button>
  </div>

  <div class="form-screen" id="instructor-q5">
    <h2>Do you want your site optimized for mobile?</h2>
    <p><strong>(Basic Plan)</strong> – Ensures your website looks great and works on all mobile devices.</p>
    <div class="button-row">
      <button type="button" onclick="recordFeature('mobile'); next()">Yes</button>
      <button type="button" onclick="next()">No</button>
    </div>
    <button type="button" onclick="prev()">Back</button>
  </div>

  <div class="form-screen" id="instructor-q6">
    <h2>Do you want strong call-to-action buttons?</h2>
    <p><strong>(Basic Plan)</strong> – Buttons that guide visitors to book lessons or contact you.</p>
    <div class="button-row">
      <button type="button" onclick="recordFeature('cta'); next()">Yes</button>
      <button type="button" onclick="next()">No</button>
    </div>
    <button type="button" onclick="prev()">Back</button>
  </div>

  <div class="form-screen" id="instructor-q7">
    <h2>Do you want a simple contact form?</h2>
    <p><strong>(Basic Plan)</strong> – Allows visitors to send you messages directly from your website.</p>
    <div class="button-row">
      <button type="button" onclick="recordFeature('contact'); next()">Yes</button>
      <button type="button" onclick="next()">No</button>
    </div>
    <button type="button" onclick="prev()">Back</button>
  </div>

  <div class="form-screen" id="instructor-q8">
    <h2>Do you want an About Me / Instructor Bio section?</h2>
    <p><strong>(Basic Plan)</strong> – Showcase your experience, qualifications, and teaching style.</p>
    <div class="button-row">
      <button type="button" onclick="recordFeature('bio'); next()">Yes</button>
      <button type="button" onclick="next()">No</button>
    </div>
    <button type="button" onclick="prev()">Back</button>
  </div>

  <!-- STEP 9–13: Standard Plan -->
  <div class="form-screen" id="instructor-q9">
    <h2>Do you want your site to rank on Google locally?</h2>
    <p><strong>(Standard Plan)</strong> – Optimized for local SEO so students in your area can find you.</p>
    <div class="button-row">
      <button type="button" onclick="recordFeature('seo'); next()">Yes</button>
      <button type="button" onclick="next()">No</button>
    </div>
    <button type="button" onclick="prev()">Back</button>
  </div>

  <div class="form-screen" id="instructor-q10">
    <h2>Would you like to display student reviews?</h2>
    <p><strong>(Standard Plan)</strong> – Build trust by showing feedback from your past students.</p>
    <div class="button-row">
      <button type="button" onclick="recordFeature('reviews'); next()">Yes</button>
      <button type="button" onclick="next()">No</button>
    </div>
    <button type="button" onclick="prev()">Back</button>
  </div>

  <div class="form-screen" id="instructor-q11">
    <h2>Do you want branding help (logo, colors)?</h2>
    <p><strong>(Standard Plan)</strong> – Assistance creating a professional brand identity for your website.</p>
    <div class="button-row">
      <button type="button" onclick="recordFeature('branding'); next()">Yes</button>
      <button type="button" onclick="next()">No</button>
    </div>
    <button type="button" onclick="prev()">Back</button>
  </div>

  <div class="form-screen" id="instructor-q12">
    <h2>Do you want a FAQ or student guide section?</h2>
    <p><strong>(Standard Plan)</strong> – Helps answer common student questions and reduces repeated queries.</p>
    <div class="button-row">
      <button type="button" onclick="recordFeature('faq'); next()">Yes</button>
      <button type="button" onclick="next()">No</button>
    </div>
    <button type="button" onclick="prev()">Back</button>
  </div>

  <div class="form-screen" id="instructor-q13">
    <h2>Do you want newsletter signup or mailing list?</h2>
    <p><strong>(Standard Plan)</strong> – Collect emails to keep in touch and send updates to your students.</p>
    <div class="button-row">
      <button type="button" onclick="recordFeature('newsletter'); next()">Yes</button>
      <button type="button" onclick="next()">No</button>
    </div>
    <button type="button" onclick="prev()">Back</button>
  </div>

  <!-- STEP 14–18: Premium Plan -->
  <div class="form-screen" id="instructor-q14">
    <h2>Do you want to offer lesson packages or gift vouchers online?</h2>
    <p><strong>(Premium Plan)</strong> – Sell prepaid lesson packages or gift vouchers through your site.</p>
    <div class="button-row">
      <button type="button" onclick="recordFeature('packages'); next()">Yes</button>
      <button type="button" onclick="next()">No</button>
    </div>
    <button type="button" onclick="prev()">Back</button>
  </div>

  <div class="form-screen" id="instructor-q15">
    <h2>Do you want social media integration?</h2>
    <p><strong>(Premium Plan)</strong> – Connect your website with your social media profiles for sharing updates.</p>
    <div class="button-row">
      <button type="button" onclick="recordFeature('social'); next()">Yes</button>
      <button type="button" onclick="next()">No</button>
    </div>
    <button type="button" onclick="prev()">Back</button>
  </div>

  <div class="form-screen" id="instructor-q16">
    <h2>Would you like a professional email address (info@yourdomain.com)?</h2>
    <p><strong>(Premium Plan)</strong> – A professional branded email for your business communications.</p>
    <div class="button-row">
      <button type="button" onclick="recordFeature('email'); next()">Yes</button>
      <button type="button" onclick="next()">No</button>
    </div>
    <button type="button" onclick="prev()">Back</button>
  </div>

  <div class="form-screen" id="instructor-q17">
    <h2>Do you want help creating content (text/images)?</h2>
    <p><strong>(Premium Plan)</strong> – Assistance with writing and images to make your website engaging.</p>
    <div class="button-row">
      <button type="button" onclick="recordFeature('content'); next()">Yes</button>
      <button type="button" onclick="next()">No</button>
    </div>
    <button type="button" onclick="prev()">Back</button>
  </div>

  <div class="form-screen" id="instructor-q18">
    <h2>Do you want a “What to Expect” guide for first lessons? <strong>(Premium Plan)</strong></h2>
    <p>Provide a clear guide for students so they know what to expect during their first lesson.</p>
    <div class="button-row">
      <button type="button" onclick="recordFeature('guide'); next()">Yes</button>
      <button type="button" onclick="next()">No</button>
    </div>
    <button type="button" onclick="prev()">Back</button>
  </div>

  <!-- =================== Q19: Ownership / Monthly Support =================== -->
  <div class="form-screen" id="instructor-q19">
    <h2>Do you want to own the website outright or prefer monthly support including hosting and maintenance?</h2>
    <p>Choose “Own Outright” to pay once and own the website, or “Monthly Support” for ongoing maintenance, updates, and hosting.</p>
    <div class="button-row">
      <button type="button" onclick="recordFeature('buyOutright'); next()">Own Outright</button>
      <button type="button" onclick="recordFeature('monthlySupport'); next()">Monthly Support</button>
    </div>
    <button type="button" onclick="prev()">Back</button>
  </div>

  <!-- =================== Recommended Plan Display =================== -->
  <div class="form-screen" id="recommended-plan-screen">
    <h2>Your Recommended Plan</h2>
    <p id="recommended-plan">Calculating...</p>
    <div class="button-row">
      <button type="button" onclick="goToPayPal(selectedPlan)">Proceed to Payment</button>
      <button type="button" onclick="submitLead(selectedPlan)">I need more info / Email me</button>
    </div>
    <p style="font-size:0.9em; margin-top:10px;">
      By submitting, you agree to our <a href="pages/privacy-policy.html" target="_blank">Privacy Policy</a> and <a href="pages/cookies-policy.html" target="_blank">Cookies Policy</a>.
    </p>
    <button type="button" onclick="prev()">Back</button>
  </div>

</form>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const params = new URLSearchParams(window.location.search);
  const codeParam = params.get("code");
  const stepParam = params.get("step");

  const screens = document.querySelectorAll(".form-screen");
  let currentScreen = 0;

  // ------------------ Screen Navigation ------------------
  function hideAllScreens() {
    screens.forEach(screen => {
      screen.classList.remove("active");
      screen.style.display = "none";
    });
  }

  function showScreen(id) {
    const screen = document.getElementById(id);
    if (!screen) return;

    hideAllScreens();
    screen.classList.add("active");
    screen.style.display = "flex";
    currentScreen = Array.from(screens).indexOf(screen);
    window.scrollTo({ top: 0, behavior: 'smooth' });

    updateWaterProgress();
    updateProgress(currentScreen);

    if (screen.id === "recommended-plan-screen") updateRecommendedPlan();
  }

  function next() {
    if (currentScreen < screens.length - 1) {
      currentScreen++;
      showScreen(screens[currentScreen].id);
    }
  }

  function prev() {
    if (currentScreen > 0) {
      currentScreen--;
      showScreen(screens[currentScreen].id);
    }
  }

  window.showScreen = showScreen;
  window.next = next;
  window.prev = prev;

  // ------------------ User Path & Features ------------------
  let userPath = "";
  const features = [];
  let selectedPlan = "";
  let ownershipChoice = "";

  window.setPath = (path) => { userPath = path; };

  window.recordFeature = (feature) => {
    if (!features.includes(feature)) features.push(feature);

    const hiddenFeatures = document.getElementById('hiddenFeatures');
    if (hiddenFeatures) hiddenFeatures.value = features.join(", ");

    updateRecommendedPlan();
  };

  window.recordOwnership = (choice) => {
    ownershipChoice = choice;
    const hiddenPlan = document.getElementById('hiddenPlan');
    if (hiddenPlan) hiddenPlan.value = choice;
    updateRecommendedPlan();
  };

  // ------------------ Plan Recommendation Logic ------------------
  function updateRecommendedPlan() {
    let plan = "";
    const basicFeatures = ["booking", "mobile", "cta", "contact", "bio"];
    const standardFeatures = ["seo", "reviews", "branding", "faq", "newsletter"];
    const premiumFeatures = ["packages", "social", "email", "content", "guide"];

    const hasBasic = features.some(f => basicFeatures.includes(f));
    const hasStandard = features.some(f => standardFeatures.includes(f));
    const hasPremium = features.some(f => premiumFeatures.includes(f));

    if (hasPremium) plan = "Premium Plan: Full features including lesson packages, social media, content, professional email";
    else if (hasStandard) plan = "Standard Plan: Booking, payments, SEO, branding help";
    else if (hasBasic) plan = "Basic Plan: Simple website + booking/contact";
    else plan = "Basic Plan: Simple website + booking/contact";

    if (ownershipChoice === "buyOutright") plan += " (You chose to own the website outright)";
    else if (ownershipChoice === "monthlySupport") plan += " (You chose monthly support including hosting & maintenance)";

    const recEl = document.getElementById('recommended-plan');
    if (recEl) recEl.innerText = plan;

    selectedPlan = plan.split(":")[0]; // For PayPal/lead
    const hiddenPlan = document.getElementById('hiddenPlan');
    if (hiddenPlan) hiddenPlan.value = selectedPlan;
  }

  // ------------------ Q19 Ownership Buttons ------------------
  const q19YesBtn = document.querySelector("#instructor-q19 button:nth-child(1)");
  const q19NoBtn = document.querySelector("#instructor-q19 button:nth-child(2)");

  if (q19YesBtn) q19YesBtn.addEventListener("click", () => { recordOwnership('buyOutright'); next(); });
  if (q19NoBtn) q19NoBtn.addEventListener("click", () => { recordOwnership('monthlySupport'); next(); });

  // ------------------ Step 3: Design Code ------------------
  window.goToConcept = () => {
    const input = document.getElementById('designInput');
    if (!input) return;
    const code = input.value.trim();
    if (!code) { alert("Please enter a design code."); return; }
    window.location.href = `https://doctoc30.github.io/Driving-School-Web-Design-/pages/concepts.html?code=${encodeURIComponent(code)}&fromFunnel=1`;
  };

  if (codeParam && stepParam) showScreen(`instructor-q${stepParam}`);
  else showScreen('instructor-q2');

  // ------------------ PayPal / Lead Submission ------------------
  const planLinks = {
    "Basic Plan": "https://www.paypal.com/paypal-link-basic",
    "Standard Plan": "https://www.paypal.com/paypal-link-standard",
    "Premium Plan": "https://www.paypal.com/paypal-link-premium"
  };

  window.goToPayPal = (plan) => {
    selectedPlan = plan;
    const hiddenPlan = document.getElementById('hiddenPlan');
    const hiddenLink = document.getElementById('hiddenPaymentLink');
    if (hiddenPlan) hiddenPlan.value = plan;
    if (hiddenLink) hiddenLink.value = planLinks[plan];
    window.location.href = planLinks[plan];
  };

  window.submitLead = (plan) => {
    selectedPlan = plan;
    const hiddenPlan = document.getElementById('hiddenPlan');
    const hiddenLink = document.getElementById('hiddenPaymentLink');
    if (hiddenPlan) hiddenPlan.value = plan;
    if (hiddenLink) hiddenLink.value = "";
    const form = document.getElementById('formWrapper');
    if (form) form.submit();
  };

  // ------------------ Back Buttons ------------------
  const backButtons = document.querySelectorAll(".back-btn");
  backButtons.forEach(btn => btn.addEventListener("click", prev));

  // ------------------ Progress Bar ------------------
  const totalSteps = screens.length;
  function updateProgress(step) {
    const progressBar = document.querySelector('.progress-bar');
    const progressLabel = document.querySelector('.progress-label');
    const percent = Math.round(((step + 1) / totalSteps) * 100);
    if (progressBar) progressBar.style.width = percent + "%";
    if (progressLabel) progressLabel.textContent = percent + "%";
  }

  // ------------------ Water Rise ------------------
  function updateWaterProgress() {
    const wave = document.getElementById('progress-wave');
    if (!wave) return;
    const progressPercent = ((currentScreen + 1) / totalSteps) * 100;
    wave.style.height = progressPercent + '%';
  }

  // ------------------ Hamburger Menu ------------------
  const hamburger = document.querySelector('.hamburger');
  const menu = document.querySelector('nav.menu');
  if (hamburger && menu) {
    hamburger.addEventListener('click', e => {
      e.stopPropagation();
      const isOpen = menu.classList.toggle('open');
      hamburger.classList.toggle('active');
      hamburger.setAttribute('aria-expanded', isOpen);
      menu.setAttribute('aria-hidden', !isOpen);
      document.body.style.overflow = isOpen ? 'hidden' : '';
    });
    document.addEventListener('click', e => {
      if (!menu.contains(e.target) && !hamburger.contains(e.target)) {
        menu.classList.remove('open');
        hamburger.classList.remove('active');
        hamburger.setAttribute('aria-expanded', false);
        menu.setAttribute('aria-hidden', true);
        document.body.style.overflow = '';
      }
    });
  }

  // ------------------ AOS Init ------------------
  AOS.init();
});




 // Grab all form screens
const screens = document.querySelectorAll('.form-screen');
const progressBar = document.querySelector('.progress-bar');
const progressLabel = document.querySelector('.progress-label');

function updateProgress() {
  const total = screens.length;
  let currentIndex = 0;

  screens.forEach((screen, index) => {
    if (screen.classList.contains('active')) currentIndex = index + 1;
  });

  const percent = Math.round((currentIndex / total) * 100);

  // Update the bar
  progressBar.style.width = percent + '%';
  progressLabel.textContent = percent + '%';
}

// Example: update when navigating to next screen
screens.forEach((screen, index) => {
  screen.addEventListener('click', () => {
    // Simulate moving to next screen for testing
    screens.forEach(s => s.classList.remove('active'));
    const next = screens[index + 1] || screens[0];
    next.classList.add('active');
    updateProgress();
  });
});






  // Select the progress elements
  const progressContainer = document.querySelector('.progress-container');
  const progressBar = document.querySelector('.progress-bar');
  const progressLabel = document.querySelector('.progress-label');

  // Select all form screens
  const screens = document.querySelectorAll('.form-screen');
  let currentStep = 0;

  // Show progress bar when form starts
  function showProgressBar() {
    progressContainer.classList.add('active');
    updateProgress();
  }

  // Update progress bar based on current step
  function updateProgress() {
    const totalSteps = screens.length;
    const percent = Math.round((currentStep / (totalSteps - 1)) * 100);
    progressBar.style.width = percent + '%';
    progressLabel.textContent = percent + '%';
  }

  // Move to next screen
  function showScreen(screenId) {
    screens.forEach(screen => screen.classList.remove('active'));
    const screen = document.getElementById(screenId);
    if (screen) {
      screen.classList.add('active');
    }

    // Update currentStep
    currentStep = Array.from(screens).indexOf(screen);
    updateProgress();
  }

  // Initialize: call this after splash/typewriter finishes
  showProgressBar();

// Initial call to set starting progress
updateProgress();



  
const hamburger = document.querySelector('.hamburger');
const menu = document.querySelector('nav.menu');

hamburger.addEventListener('click', () => {
  hamburger.classList.toggle('active');
  menu.classList.toggle('open');
});

// Close menu when any link is clicked
const menuLinks = document.querySelectorAll('nav.menu ul li a');
menuLinks.forEach(link => {
  link.addEventListener('click', () => {
    hamburger.classList.remove('active');
    menu.classList.remove('open');
  });
});

</script>
</body>
</html>
